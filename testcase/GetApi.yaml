# http://httpbin.org
# 测试get请求
-
  name: 获取本机ip
  base_url: http://httpbin.org
  request:
    url: /ip      # 完整url为base_url+url
    method: GET
  validata:
    responseStatus|equal: # 相等断言
      statusCode: 200
-
  name: 获取user-agent
  base_url: null
  request:
    url: http://httpbin.org/user-agent
    method: GET
  validata: null
-
  name: get请求
  base_url: "${base_url}"
  request:
    url: /get
    method: GET
    params:
      user: "{{@cname}}"   # 调用python函数生成测试数据
      ssn: "{{@cssn}}"
  extract:
    user: $..user   # 提取响应中的数据，用于接口关联。
    ssn: $..ssn     # json提取如: $..token 正则提取如: token=(.*?)
  validata: null
-
  name: 设置cookie
  base_url: "${base_url}"
  request:
    url: /cookies/set
    method: GET
    params:
      foo1: "${user}"
      foo2: "${ssn}"
  validata:
    responseStatus|equal: # 相等断言
      statusCode: 200
-
  name: 获取cookie
  base_url: "${base_url}"
  request:
    url: /cookies
    method: GET
  validata:
    responseStatus|equal: # 相等断言
      statusCode: 200
-
  name: Authorization bearer鉴权
  base_url: "${base_url}"
  request:
    url: /bearer
    method: GET
    headers:
      Authorization: "Bearer aaa"
  validata:
    responseJson|equal:
      $..token: aaa
    responseJson|exist:
      - $..token
-
  name: Authorization basic鉴权
  base_url: "${base_url}"
  request:
    url: /basic-auth/admin/123456
    method: GET
    headers:
      Authorization: "Basic {{${username}|:|${password}|#base64}}"
  validata:
    responseStatus|equal: # 相等断言
      statusCode: 200
-
  name: png图片下载
  base_url: "${base_url}"
  request:
    url: /image/png
    method: GET
  validata: null
-
  name: jpeg图片下载
  base_url: "${base_url}"
  request:
    url: /image/jpeg
    method: GET
  validata: null
-
  name: 获取html响应
  base_url: "${base_url}"
  request:
    url: /html
    method: GET
  extract:
    who: "Availing (.*?) of the mild"
  validata:
    responseStatus|equal: # 相等断言
      statusCode: 200
    responseText|exist:
      - himself
      - Availing himself of the mild
